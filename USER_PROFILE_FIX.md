# ุฅุตูุงุญ ุฎุทุฃ user_id ูู UserProfileController

## ุงููุดููุฉ:
```
SQLSTATE[42S22]: Column not found: 1054 Unknown column 'user_id' in 'where clause' 
(Connection: mysql, SQL: select * from `service_requests` where `user_id` = 1)
app/Http/Controllers/UserProfileController.php :32
```

## ุงูุณุจุจ:
- ูุงู ุงูููุฏ ูุญุงูู ุงูุจุญุซ ุนู `user_id` ูู ุฌุฏูู `service_requests`
- ุงูุนููุฏ `user_id` ูู ููู ููุฌูุฏุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- Migration ูู ูุชู ุชุดุบููู ุจุดูู ุตุญูุญ

## ุงูุญู ุงููุทุจู:

### 1. **ุชุดุบูู Migration:**
```bash
php artisan migrate
```
ุชู ุชุดุบูู migration `2025_09_10_155938_add_user_maid_to_service_requests_table` ุจูุฌุงุญ

### 2. **ุชุญุฏูุซ UserProfileController:**
```php
// ุฌูุจ ุงูุฎุงุฏูุงุช ุงููุฑุชุจุทุฉ ุจุงูุนููู ูู ุฎูุงู ุทูุจุงุช ุงูุฎุฏูุฉ
$userMaids = collect();

// ุงูุจุญุซ ุนู ุทูุจุงุช ุงูุฎุฏูุฉ ุงููุฑุชุจุทุฉ ุจุงููุณุชุฎุฏู
if ($user->phone) {
    $userServiceRequests = ServiceRequest::where('user_id', $user->id)
        ->orWhere('phone', $user->phone)
        ->with('maid')
        ->get();
        
    $userMaids = $userServiceRequests
        ->pluck('maid')
        ->unique('id')
        ->filter();
}
```

### 3. **ุงูููุทู ุงูุฌุฏูุฏ:**
- ุงูุจุญุซ ุนู ุทูุจุงุช ุงูุฎุฏูุฉ ุงููุฑุชุจุทุฉ ุจุงููุณุชุฎุฏู ุนุจุฑ `user_id`
- ุงูุจุญุซ ุฃูุถุงู ุนุจุฑ ุฑูู ุงููุงุชู (`phone`) ูุฑุจุท ุงูุทูุจุงุช ุงูุนุงูุฉ ุจุงููุณุชุฎุฏููู ุงููุณุฌููู
- ุฌูุจ ุงูุฎุงุฏูุงุช ุงููุฑุชุจุทุฉ ุจุทูุจุงุช ุงูุฎุฏูุฉ ูุฐู

## ุงููููุฒุงุช:

### โ **ุฑุจุท ุฐูู:**
- ูุฑุจุท ุทูุจุงุช ุงูุฎุฏูุฉ ุจุงููุณุชุฎุฏููู ุงููุณุฌููู
- ูุจุญุซ ุนุจุฑ `user_id` ู `phone` ููุฑุจุท ุงูุฃูุถู

### โ **ูุฑููุฉ ูู ุงูุฑุจุท:**
- ุญุชู ูู ูู ููู `user_id` ูุญุฏุฏุงูุ ูููู ุงูุฑุจุท ุนุจุฑ ุฑูู ุงููุงุชู
- ูุฏุนู ุงูุทูุจุงุช ุงูุนุงูุฉ ูุงูุทูุจุงุช ุงููุณุฌูุฉ

### โ **ุฃูุงู ูู ุงูููุฏ:**
- ูุญุต ูุฌูุฏ ุฑูู ุงููุงุชู ูุจู ุงูุจุญุซ
- ุงุณุชุฎุฏุงู `collect()` ููุชุนุงูู ุงูุขูู ูุน ุงูุจูุงูุงุช

## Migration Details:

### **ุงูุนููุฏ ุงููุถุงู:**
```php
Schema::table('service_requests', function (Blueprint $table) {
    $table->unsignedBigInteger('user_id')->nullable()->after('id');
    $table->unsignedBigInteger('maid_id')->nullable()->after('user_id');
    $table->foreign('user_id')->references('id')->on('users')->onDelete('cascade');
    $table->foreign('maid_id')->references('id')->on('maids')->onDelete('cascade');
});
```

### **ุงูุนูุงูุงุช ูู Model:**
```php
// ServiceRequest.php
public function user()
{
    return $this->belongsTo(User::class);
}

public function maid()
{
    return $this->belongsTo(Maid::class);
}
```

## ููููุฉ ุงูุงุฎุชุจุงุฑ:

### 1. **ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ:**
- ุณุฌู ูุณุชุฎุฏูุงู ุฌุฏูุฏุงู ูุน ุฑูู ูุงุชู
- ุชุฃูุฏ ูู ุฃู ุงูุญุณุงุจ ูุนูู ุจุดูู ุตุญูุญ

### 2. **ุฅูุดุงุก ุทูุจ ุฎุฏูุฉ:**
- ุงุณุชุฎุฏู ููุณ ุฑูู ุงููุงุชู ูู ูููุฐุฌ ุงูุงุชุตุงู
- ุชุฃูุฏ ูู ุฃู ุงูุทูุจ ูุชู ุฑุจุทู ุจุงููุณุชุฎุฏู

### 3. **ุงูุชุญูู ูู ุงูุจุฑูููู:**
- ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูุจุฑูููู
- ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก
- ุชุญูู ูู ุธููุฑ ุงูุฎุงุฏูุงุช ุงููุฑุชุจุทุฉ

## ุงููุชูุฌุฉ:

### โ **ุฅุตูุงุญ ุงูุฎุทุฃ:**
- ูุง ูุฒูุฏ ูู ุฃุฎุทุงุก `user_id` column not found
- ุงูููุฏ ูุนูู ุจุดูู ุตุญูุญ

### โ **ุชุญุณูู ุงููุธุงุฆู:**
- ุฑุจุท ุฃูุถู ุจูู ุงููุณุชุฎุฏููู ูุทูุจุงุช ุงูุฎุฏูุฉ
- ุฏุนู ููุทูุจุงุช ุงูุนุงูุฉ ูุงููุณุฌูุฉ

### โ **ุงุณุชูุฑุงุฑ ุงููุธุงู:**
- ูุง ุฃุฎุทุงุก ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ููุฏ ุขูู ููุญูู

## ููุงุญุธุงุช ูููุฉ:

### **ูููุทูุฑูู:**
- ุชุฃูุฏ ูู ุชุดุบูู migrations ูุจู ุงุณุชุฎุฏุงู ุงูุฃุนูุฏุฉ ุงูุฌุฏูุฏุฉ
- ุงุณุชุฎุฏู `nullable()` ููุฃุนูุฏุฉ ุงูุงุฎุชูุงุฑูุฉ
- ุฃุถู foreign keys ููุฃูุงู ูุงูุงุชุณุงู

### **ูููุณุชุฎุฏููู:**
- ุชุฃูุฏ ูู ุฅุฏุฎุงู ุฑูู ูุงุชู ุตุญูุญ ุนูุฏ ุงูุชุณุฌูู
- ุณูุชู ุฑุจุท ุทูุจุงุช ุงูุฎุฏูุฉ ุชููุงุฆูุงู ุจุญุณุงุจู

๐ **ุชู ุฅุตูุงุญ ุงููุดููุฉ ุจูุฌุงุญ!**
